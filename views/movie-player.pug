extends layout

block content
  div(class="container mx-auto px-4 py-6")
    div(class="grid grid-cols-1 lg:grid-cols-4 gap-8")
      div(class="lg:col-span-3")
        nav(class="mb-4")
          ol(class="flex items-center space-x-2 text-sm text-gray-500")
            li: a(href="/" class="hover:text-primary-600") Beranda
            li: span /
            li: a(href=`/` class="hover:text-primary-600")= anime.title

        div(class="bg-black rounded-lg overflow-hidden mb-6 relative")
          div(class="aspect-video")
            iframe(class="w-full h-full" src=`${anime.stream_url}` frameborder="0" allow="autoplay; fullscreen" allowfullscreen)
            

        if adSlots && adSlots.playerBottom && adSlots.playerBottom.length > 0
          div(class="mb-6")
            each ad in adSlots.playerBottom
              div(class="ad-slot bg-gray-100 rounded-lg")!= ad.content

      div(class="lg:col-span-1")
        if adSlots && adSlots.sidebarTop && adSlots.sidebarTop.length > 0
          div(class="mb-6")
            each ad in adSlots.sidebarTop
              div(class="ad-slot bg-gray-100 rounded-lg")!= ad.content

        div(class="bg-white rounded-lg shadow-sm p-6 mb-6")
          a(href=`/anime/${anime.slug}`)
            img(src=anime.poster alt=anime.title class="w-full rounded-lg mb-3" onerror="this.onerror=null;this.src='https://placehold.co/400x600?text=No+Image';")
          h3(class="font-bold text-gray-900 mb-2")
            a(href=`/anime/${anime.slug}` class="hover:text-primary-600")= anime.title

        div(class="bg-white rounded-lg shadow-sm p-6 mb-6")
          h3(class="font-bold text-gray-900 mb-4") Bagikan Episode
          div(class="space-y-2")
            button(onclick=`shareEpisode('facebook')` class="w-full bg-blue-600 text-white py-2 px-3 rounded text-sm hover:bg-blue-700 transition-colors") Facebook
            button(onclick=`shareEpisode('twitter')` class="w-full bg-sky-500 text-white py-2 px-3 rounded text-sm hover:bg-sky-600 transition-colors") Twitter
            button(onclick="copyEpisodeLink()" class="w-full bg-gray-600 text-white py-2 px-3 rounded text-sm hover:bg-gray-700 transition-colors") Copy Link

        if adSlots && adSlots.sidebarBottom && adSlots.sidebarBottom.length > 0
          div(class="mb-6")
            each ad in adSlots.sidebarBottom
              div(class="ad-slot bg-gray-100 rounded-lg")!= ad.content