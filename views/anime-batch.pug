extends layout

block content
  div(class="container mx-auto px-4 py-6")
    div(class="grid grid-cols-1 lg:grid-cols-4 gap-8")
      div(class="lg:col-span-3")
        nav(class="mb-4")
          ol(class="flex items-center space-x-2 text-sm text-gray-500")
            li: a(href="/" class="hover:text-primary-600") Beranda
            li: span /
            li: a(href=`/anime/${anime.slug}` class="hover:text-primary-600")= anime.title
            li: span /
            li(class="text-gray-900 font-medium") Download Batch

        div(class="bg-white rounded-lg shadow-sm p-6 mb-6")
          div(class="flex items-start space-x-4")
            img(src=anime.poster alt=anime.title class="w-24 h-32 object-cover rounded-lg flex-shrink-0")
            div(class="flex-1")
              h1(class="text-xl md:text-2xl font-bold text-gray-900 mb-2")= `Download Batch ${anime.title}`
              if anime.synopsis
                p(class="text-gray-600 text-sm leading-relaxed line-clamp-3")= anime.synopsis
              div(class="flex items-center space-x-4 mt-4")
                a(href=`/anime/${anime.slug}` class="text-primary-600 hover:text-primary-700 font-medium text-sm") ← Kembali ke Detail

        if batchLinks && batchLinks.length > 0
          div(class="bg-white rounded-lg shadow-sm p-6 mb-6")
            h2(class="text-lg font-bold text-gray-900 mb-4") Link Download Batch
            div(class="space-y-4")
              each link in batchLinks
                div(class="border border-gray-200 rounded-lg p-4 hover:border-primary-300 transition-colors")
                  div(class="flex items-center justify-between mb-3")
                    h3(class="font-medium text-gray-900")= link.quality || "Download Batch"
                    if link.size
                      span(class="text-sm text-gray-500")= link.size
                  
                  if link.description
                    p(class="text-sm text-gray-600 mb-3")= link.description
                  
                  div(class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3")
                    if link.links && link.links.length > 0
                      each downloadLink in link.links
                        a(href=downloadLink.url target="_blank" rel="noopener noreferrer" class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-primary-50 hover:text-primary-700 transition-colors")
                          div(class="flex items-center")
                            svg(class="w-5 h-5 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
                            span(class="font-medium")= downloadLink.provider || "Download"
                          svg(class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14")
                    else
                      a(href=link.url target="_blank" rel="noopener noreferrer" class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-primary-50 hover:text-primary-700 transition-colors")
                        div(class="flex items-center")
                          svg(class="w-5 h-5 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
                          span(class="font-medium") Download Batch
                        svg(class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                          path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14")

        else
          div(class="bg-white rounded-lg shadow-sm p-6 mb-6")
            div(class="text-center py-8")
              svg(class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
              h3(class="text-lg font-medium text-gray-900 mb-2") Belum ada link download
              p(class="text-gray-600") Link download batch untuk anime ini belum tersedia

        div(class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")
          h3(class="font-medium text-blue-900 mb-3") Cara Download
          div(class="space-y-2 text-sm text-blue-800")
            div(class="flex items-start")
              span(class="font-medium mr-2") 1.
              span Klik link download yang tersedia
            div(class="flex items-start")
              span(class="font-medium mr-2") 2.
              span Tunggu beberapa detik hingga muncul tombol download
            div(class="flex items-start")
              span(class="font-medium mr-2") 3.
              span Klik tombol download untuk memulai unduhan
            div(class="flex items-start")
              span(class="font-medium mr-2") 4.
              span Ekstrak file yang sudah didownload menggunakan WinRAR atau 7-Zip

        if adSlots && adSlots.contentBottom && adSlots.contentBottom.length > 0
          div(class="mb-6")
            each ad in adSlots.contentBottom
              div(class="ad-slot bg-gray-100 rounded-lg")!= ad.content

      div(class="lg:col-span-1")
        if adSlots && adSlots.sidebarTop && adSlots.sidebarTop.length > 0
          div(class="mb-6")
            each ad in adSlots.sidebarTop
              div(class="ad-slot bg-gray-100 rounded-lg")!= ad.content

        div(class="bg-white rounded-lg shadow-sm p-6 mb-6")
          h3(class="font-bold text-gray-900 mb-4") Informasi Download
          div(class="space-y-3 text-sm")
            div
              span(class="font-medium text-gray-700") Format:
              span(class="text-gray-600 ml-2") MP4/MKV
            div
              span(class="font-medium text-gray-700") Subtitle:
              span(class="text-gray-600 ml-2") Indonesia
            div
              span(class="font-medium text-gray-700") Kualitas:
              span(class="text-gray-600 ml-2") 480p, 720p, 1080p
            div
              span(class="font-medium text-gray-700") Audio:
              span(class="text-gray-600 ml-2") Japanese

        div(class="bg-white rounded-lg shadow-sm p-6 mb-6")
          h3(class="font-bold text-gray-900 mb-4") Aksi Lainnya
          div(class="space-y-3")
            a(href=`/anime/${anime.slug}` class="flex items-center text-gray-600 hover:text-primary-600 transition-colors")
              svg(class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z")
              span Detail Anime
            a(href=`/anime/${anime.slug}/episodes` class="flex items-center text-gray-600 hover:text-primary-600 transition-colors")
              svg(class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z")
              span Streaming Online

        div(class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6")
          h3(class="font-medium text-yellow-900 mb-3") Tips Download
          div(class="space-y-2 text-sm text-yellow-800")
            div • Gunakan koneksi internet yang stabil
            div • Pastikan ruang penyimpanan cukup
            div • Gunakan download manager untuk file besar
            div • Scan file dengan antivirus setelah download

        if adSlots && adSlots.sidebarBottom && adSlots.sidebarBottom.length > 0
          div(class="mb-6")
            each ad in adSlots.sidebarBottom
              div(class="ad-slot bg-gray-100 rounded-lg")!= ad.content
